<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>åšå®¢ - DevBlog</title>
  <link rel="stylesheet" href="/css/blog.css">
  <link rel="stylesheet" href="/css/blog-unified.css">
  <style>
    /* iOS Safari ä¿®å¤ - å…¨å±€é˜²æ­¢æº¢å‡ºï¼ˆä¼˜åŒ–æ€§èƒ½ï¼šå‡å°‘ !important ä½¿ç”¨ï¼‰ */
    html, body {
      width: 100%;
      max-width: 100vw;
      overflow-x: hidden;
      box-sizing: border-box;
    }
    
    * {
      box-sizing: border-box;
    }
    
    /* åªåœ¨ç§»åŠ¨ç«¯ä½¿ç”¨ !important è¦†ç›– */
    @media (max-width: 768px) {
      html, body {
        overflow-x: hidden !important;
        max-width: 100vw !important;
      }
    }
    
    /* åŸƒåŠä¸»é¢˜èƒŒæ™¯ */
    .particles-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
      overflow: hidden;
      background: linear-gradient(180deg, #fef9f3 0%, #fff 50%, #f9fafb 100%);
    }
    
    /* é‡‘å­—å¡”è£…é¥° */
    .particles-background::before {
      content: '';
      position: absolute;
      top: 10%;
      right: 5%;
      width: 200px;
      height: 200px;
      background: linear-gradient(135deg, rgba(217, 119, 6, 0.03) 0%, rgba(217, 119, 6, 0.01) 100%);
      clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
      opacity: 0.5;
      animation: float 30s infinite ease-in-out;
    }
    
    .particles-background::after {
      content: '';
      position: absolute;
      bottom: 15%;
      left: 8%;
      width: 150px;
      height: 150px;
      background: linear-gradient(135deg, rgba(217, 119, 6, 0.02) 0%, rgba(217, 119, 6, 0.005) 100%);
      clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
      opacity: 0.4;
      animation: float 25s infinite ease-in-out reverse;
    }
    
    .particle {
      position: absolute;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(217, 119, 6, 0.08) 0%, rgba(217, 119, 6, 0.02) 100%);
      animation: float 20s infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      33% { transform: translate(30px, -30px) rotate(120deg); }
      66% { transform: translate(-20px, 20px) rotate(240deg); }
    }
    
    /* å¯çˆ±çš„åŠ è½½åŠ¨ç”» */
    @keyframes bounce {
      0%, 100% {
        transform: translateY(0) scale(1);
      }
      50% {
        transform: translateY(-15px) scale(1.1);
      }
    }
    
    @keyframes shimmer {
      0% {
        transform: translateX(-100%);
      }
      100% {
        transform: translateX(100%);
      }
    }
    
    @keyframes rotateEmoji {
      0% {
        transform: rotate(0deg) scale(1);
      }
      25% {
        transform: rotate(-10deg) scale(1.05);
      }
      50% {
        transform: rotate(0deg) scale(1.1);
      }
      75% {
        transform: rotate(10deg) scale(1.05);
      }
      100% {
        transform: rotate(0deg) scale(1);
      }
    }
    
    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }
  </style>
</head>
<body class="blog-page">
  <!-- ç²’å­èƒŒæ™¯ -->
  <div class="particles-background" id="particles"></div>

  <!-- å¯¼èˆªæ  -->
  <nav class="blog-nav" style="background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border-bottom: 1px solid #e5e7eb;">
    <div class="blog-nav-content" style="max-width: 1600px; margin: 0 auto; padding: 0 1rem;">
      <a href="/blog.html" class="blog-logo" style="font-size: 1.25rem; font-weight: 700;">
        <div class="blog-logo-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="currentColor" opacity="0.9"/>
            <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <span>PRO<span style="background: linear-gradient(to right, #d97706, #f59e0b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">EG</span></span>
      </a>
      <div class="blog-nav-actions" style="display: flex; align-items: center; gap: 0.75rem;">
        <div class="blog-search" style="max-width: 300px;">
          <input 
            type="text" 
            class="blog-search-input" 
            id="searchInput"
            placeholder="æœç´¢æ–‡ç« ..."
            onkeypress="handleSearchKeyPress(event)"
            style="width: 100%;"
          >
        </div>
        <a href="/blog-admin.html" class="blog-btn blog-btn-secondary blog-btn-sm">ç®¡ç†</a>
      </div>
    </div>
  </nav>

  <!-- ä¸»è¦å†…å®¹åŒºåŸŸ - ç´§å‡‘å¸ƒå±€ï¼Œä¾§è¾¹æ é è¾¹ï¼Œå®½å±è‡ªé€‚åº” -->
  <div class="blog-main-layout">
    <!-- å·¦ä¾§è¾¹æ ï¼šçƒ­é—¨æ–‡ç« å’Œå…¬å‘Š -->
    <aside class="blog-sidebar blog-sidebar-left">
      <!-- çƒ­é—¨æ–‡ç«  -->
      <div style="background: white; border: 1px solid #e5e7eb; border-radius: 0.375rem; padding: 0.75rem; margin-bottom: 0.75rem; box-shadow: 0 1px 2px rgba(0,0,0,0.04);">
        <h3 style="font-size: 0.8125rem; font-weight: 600; color: #374151; margin: 0 0 0.5rem 0; text-transform: uppercase; letter-spacing: 0.05em;">ğŸ”¥ çƒ­é—¨æ–‡ç« </h3>
        <div id="hotPostsList" style="display: flex; flex-direction: column; gap: 0.5rem; width: 100%;">
          <div class="blog-loading" style="font-size: 0.8125rem;">åŠ è½½ä¸­...</div>
        </div>
      </div>
      
      <!-- å…¬å‘Šæ  -->
      <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border: 1px solid #fbbf24; border-radius: 0.375rem; padding: 0.75rem; box-shadow: 0 1px 2px rgba(0,0,0,0.04);">
        <h3 style="font-size: 0.8125rem; font-weight: 600; color: #92400e; margin: 0 0 0.375rem 0; display: flex; align-items: center; gap: 0.375rem;">
          <span>ğŸ“¢</span> å…¬å‘Š
        </h3>
        <p style="font-size: 0.75rem; color: #78350f; margin: 0; line-height: 1.4;">æ¬¢è¿æ¥åˆ°ç”Ÿäº§ç¯å¢ƒåšå®¢ç«¯ï¼Œè¿™é‡Œæ±‡é›†åŸƒæ—…å°å·¥å…·å¾®ä¿¡å°ç¨‹åºæ‰€æœ‰å†…å®¹ã€‚</p>
      </div>
    </aside>

    <!-- ä¸­é—´å†…å®¹åŒºåŸŸï¼šæ–‡ç« å¡ç‰‡ï¼ˆè‡ªé€‚åº”ç½‘æ ¼ï¼Œç´§å‡‘å¸ƒå±€ï¼‰ -->
    <main class="blog-content">
      <!-- æ–‡ç« åˆ—è¡¨ -->
      <section id="posts" class="blog-posts-section" style="width: 100%; overflow: hidden;">
        <!-- å¯çˆ±çš„åŠ è½½åŠ¨ç”» -->
        <div id="postsLoadingAnimation" style="display: none; padding: 3rem 2rem; background: white; border: 1px solid #e5e7eb; border-radius: 0.375rem; margin-bottom: 1rem;">
          <div style="display: flex; flex-direction: column; align-items: center; gap: 1.5rem;">
            <!-- å¯çˆ±çš„è¡¨æƒ…ç¬¦å·åŠ¨ç”» -->
            <div id="postsLoadingEmoji" style="font-size: 4rem; animation: bounce 1s ease-in-out infinite; filter: drop-shadow(0 4px 8px rgba(217, 119, 6, 0.2));">ğŸ“šâœ¨</div>
            
            <!-- æœ‰è¶£çš„åŠ è½½æç¤ºæ–‡å­— -->
            <div id="postsLoadingText" style="font-size: 1.125rem; color: #6b7280; font-weight: 500; text-align: center; min-height: 1.75rem;">
              æ­£åœ¨åŠ è½½æ–‡ç« ...
            </div>
            
            <!-- è¿›åº¦æ¡ -->
            <div style="width: 100%; max-width: 500px;">
              <div style="height: 8px; background: #e5e7eb; border-radius: 10px; overflow: hidden; box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);">
                <div id="postsLoadingProgressBar" style="height: 100%; background: linear-gradient(90deg, #d97706, #f59e0b, #fbbf24); width: 0%; transition: width 0.3s ease; border-radius: 10px; box-shadow: 0 0 10px rgba(217, 119, 6, 0.4); position: relative; overflow: hidden;">
                  <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); animation: shimmer 1.5s infinite;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="blog-posts-list" id="postsGrid" style="display: flex; flex-direction: column; gap: 0; width: 100%; background: white; border: 1px solid #e5e7eb; border-radius: 0.375rem; overflow: hidden;">
          <div class="blog-loading" style="padding: 2rem; text-align: center;">åŠ è½½ä¸­...</div>
        </div>
        <div class="blog-pagination" id="pagination" style="margin-top: 1.5rem; margin-bottom: 1rem; display: flex; justify-content: center; align-items: center; flex-wrap: wrap; gap: 0.5rem; width: 100%;"></div>
      </section>

      <!-- æ–‡ç« å½’æ¡£ -->
      <section id="archive" class="blog-posts-section" style="display: none;">
        <!-- å¯çˆ±çš„åŠ è½½åŠ¨ç”» -->
        <div id="archiveLoadingProgress" style="display: none; padding: 3rem 2rem; background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%); border-radius: 0.5rem; margin-bottom: 2rem; border: 1px solid #e5e7eb;">
          <div style="display: flex; flex-direction: column; align-items: center; gap: 1.5rem;">
            <!-- å¯çˆ±çš„è¡¨æƒ…ç¬¦å·åŠ¨ç”» -->
            <div id="archiveLoadingEmoji" style="font-size: 4rem; animation: bounce 1s ease-in-out infinite; filter: drop-shadow(0 4px 8px rgba(217, 119, 6, 0.2));">ğŸ“‚âœ¨</div>
            
            <!-- æœ‰è¶£çš„åŠ è½½æç¤ºæ–‡å­— -->
            <div id="archiveLoadingText" style="font-size: 1.125rem; color: #6b7280; font-weight: 500; text-align: center; min-height: 1.75rem;">
              æ­£åœ¨æ•´ç†å½’æ¡£æ–‡ç« ...
            </div>
            
            <!-- è¿›åº¦æ¡ -->
            <div style="width: 100%; max-width: 500px;">
              <div style="height: 8px; background: #e5e7eb; border-radius: 10px; overflow: hidden; box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);">
                <div id="archiveLoadingProgressBar" style="height: 100%; background: linear-gradient(90deg, #d97706, #f59e0b, #fbbf24); width: 0%; transition: width 0.3s ease; border-radius: 10px; box-shadow: 0 0 10px rgba(217, 119, 6, 0.4); position: relative; overflow: hidden;">
                  <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); animation: shimmer 1.5s infinite;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="blog-archive-container" id="archiveContainer">
          <div class="blog-loading">åŠ è½½ä¸­...</div>
        </div>
      </section>
    </main>
    
    <!-- å³ä¾§è¾¹æ ï¼šåˆ†ç±» -->
    <aside class="blog-sidebar blog-sidebar-right">
      <div class="blog-taxonomy-card" style="background: white; border: 1px solid #e5e7eb; border-radius: 0.375rem; padding: 0.75rem; box-shadow: 0 1px 2px rgba(0,0,0,0.04);">
        <h2 class="blog-taxonomy-title" style="font-size: 0.8125rem; font-weight: 600; color: #374151; margin: 0 0 0.5rem 0; text-transform: uppercase; letter-spacing: 0.05em;">åˆ†ç±»</h2>
        <div class="blog-taxonomy-list" id="categoriesList" style="display: flex; flex-direction: column; gap: 0.375rem; width: 100%;">
          <div class="blog-loading" style="font-size: 0.8125rem;">åŠ è½½ä¸­...</div>
        </div>
      </div>
    </aside>
  </div>
  
  <!-- å“åº”å¼æ ·å¼ -->
  <style>
    /* è®ºå›é£æ ¼åˆ—è¡¨æ ·å¼ */
    .blog-posts-list {
      display: flex;
      flex-direction: column;
      gap: 0;
      width: 100%;
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 0.375rem;
      overflow: hidden;
    }
    
    .blog-post-item {
      border-bottom: 1px solid #f3f4f6;
    }
    
    .blog-post-item:last-child {
      border-bottom: none;
    }
    
    .blog-post-item:hover {
      background: #f9fafb;
    }
    
    /* ç”µè„‘ç«¯ç¼–è¾‘æŒ‰é’®ä¸è¦†ç›–å†…å®¹ */
    @media (min-width: 769px) {
      .blog-post-item .blog-post-edit-btn {
        position: absolute;
        top: 0.75rem;
        right: 0.75rem;
        z-index: 10;
        width: 2rem;
        height: 2rem;
      }
      
      /* ç¡®ä¿å³ä¾§å…ƒä¿¡æ¯åŒºåŸŸä¸è¢«ç¼–è¾‘æŒ‰é’®é®æŒ¡ï¼ˆåªåœ¨æœ‰ç¼–è¾‘æŒ‰é’®æ—¶ï¼‰ */
      .blog-post-item:has(.blog-post-edit-btn) > div:last-child {
        padding-right: 2.5rem !important;
        box-sizing: border-box !important;
      }
      
      /* å…¼å®¹ä¸æ”¯æŒ:has()çš„æµè§ˆå™¨ */
      .blog-post-item .blog-post-edit-btn ~ * {
        /* è¿™ä¸ªè§„åˆ™ä¼šè¢«å†…è”æ ·å¼è¦†ç›–ï¼Œæ‰€ä»¥ä¸éœ€è¦ */
      }
    }
    
    /* å…¼å®¹æ—§çš„å¡ç‰‡æ ·å¼ */
    .blog-post-card {
      transition: all 0.2s ease;
    }
    
    /* ä¾§è¾¹æ åˆ—è¡¨é¡¹å¯¹é½ä¼˜åŒ– */
    .blog-taxonomy-list,
    #hotPostsList {
      width: 100%;
      box-sizing: border-box;
    }
    
    .blog-taxonomy-list a {
      display: flex !important;
      align-items: center !important;
      justify-content: space-between !important;
      width: 100% !important;
      box-sizing: border-box !important;
      text-align: left !important;
    }
    
    .blog-taxonomy-list a > span:first-child {
      flex: 1;
      min-width: 0;
      text-align: left;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    
    .blog-taxonomy-list a > span:last-child {
      flex-shrink: 0;
      text-align: right;
      margin-left: 0.5rem;
    }
    
    #hotPostsList a {
      display: flex !important;
      align-items: start !important;
      width: 100% !important;
      box-sizing: border-box !important;
    }
    
    #hotPostsList a > span:first-child {
      flex-shrink: 0;
      text-align: center;
    }
    
    #hotPostsList a > div {
      flex: 1;
      min-width: 0;
      text-align: left;
    }
    
    #hotPostsList a > div > div:first-child {
      text-align: left !important;
    }
    
    #hotPostsList a > div > div:last-child {
      text-align: left !important;
    }
    
    /* åˆ†é¡µæŒ‰é’®æ ·å¼ä¼˜åŒ– */
    .blog-pagination-btn {
      min-width: 36px;
      height: 36px;
      padding: 0 0.75rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.875rem;
      border-radius: 0.375rem;
      text-decoration: none;
      color: #374151;
      background: white;
      border: 1px solid #e5e7eb;
      transition: all 0.2s;
    }
    
    .blog-pagination-btn:hover:not(.active):not([style*="opacity"]) {
      background: #f9fafb;
      border-color: #d1d5db;
      color: #d97706;
    }
    
    .blog-pagination-btn.active {
      background: #d97706;
      color: white;
      border-color: #d97706;
      font-weight: 600;
    }
    
    /* è®ºå›é£æ ¼åˆ—è¡¨å¸ƒå±€ */
    #postsGrid.blog-posts-list,
    .blog-posts-list#postsGrid,
    section#posts .blog-posts-list#postsGrid,
    .blog-content .blog-posts-list#postsGrid,
    main.blog-content .blog-posts-list#postsGrid {
      display: flex !important;
      flex-direction: column !important;
      gap: 0 !important;
      width: 100% !important;
      box-sizing: border-box !important;
      max-width: 100% !important;
    }
    
    /* å…¼å®¹æ—§çš„ç½‘æ ¼å¸ƒå±€ï¼ˆå·²åºŸå¼ƒï¼‰ */
    #postsGrid.blog-posts-grid,
    .blog-posts-grid#postsGrid {
      display: flex !important;
      flex-direction: column !important;
      gap: 0 !important;
    }
    
    /* ä¸»å¸ƒå±€å®¹å™¨ - ä½¿ç”¨gridå¸ƒå±€ï¼Œç¡®ä¿å±…ä¸­ï¼Œè¦†ç›–CSSæ–‡ä»¶ä¸­çš„flexå¸ƒå±€ */
    .blog-main-layout {
      display: grid !important;
      grid-template-columns: 240px 1fr 240px !important;
      gap: 1rem !important;
      max-width: 1600px !important;
      margin: 0 auto !important;
      padding: 1rem 0.75rem !important;
      width: 100% !important;
      box-sizing: border-box !important;
      position: relative !important;
      z-index: 10 !important;
    }
    
    /* ç¡®ä¿ä¸­é—´å†…å®¹åŒºåŸŸæœ‰è¶³å¤Ÿå®½åº¦ï¼Œç§»é™¤max-widthé™åˆ¶ */
    .blog-content {
      min-width: 0 !important;
      width: 100% !important;
      max-width: none !important;
      overflow: hidden !important;
      flex: none !important;
      order: 0 !important;
    }
    
    /* ä¾§è¾¹æ æ ·å¼é‡ç½®ï¼Œç¡®ä¿åœ¨gridä¸­æ­£ç¡®æ˜¾ç¤º */
    .blog-sidebar {
      width: 100% !important;
      flex-shrink: 0 !important;
      position: sticky !important;
      top: 0.5rem !important;
      align-self: start !important;
      height: fit-content !important;
      max-height: none !important;
      overflow-y: visible !important;
    }
    
    .blog-sidebar-left {
      order: 0 !important;
      padding-left: 0.5rem !important;
    }
    
    .blog-sidebar-right {
      padding-right: 0.5rem !important;
    }
    
    .blog-posts-section {
      width: 100% !important;
      overflow: hidden !important;
    }
    
    /* å¯¼èˆªæ å®½å±é€‚é… */
    @media (min-width: 1921px) {
      .blog-nav-content {
        max-width: 1800px !important;
      }
    }
    
    @media (max-width: 1920px) and (min-width: 1601px) {
      .blog-nav-content {
        max-width: 1600px !important;
      }
    }
    
    @media (max-width: 1600px) and (min-width: 1400px) {
      .blog-nav-content {
        max-width: 1400px !important;
      }
    }
    
    /* è¶…å®½å±é€‚é…ï¼ˆ>1920pxï¼‰ï¼šå¢åŠ æœ€å¤§å®½åº¦ï¼Œå……åˆ†åˆ©ç”¨ç©ºé—´ */
    @media (min-width: 1921px) {
      .blog-main-layout {
        max-width: 1800px !important;
        grid-template-columns: 280px 1fr 280px !important;
        gap: 1.5rem !important;
      }
    }
    
    /* å®½å±é€‚é…ï¼ˆ1600px-1920pxï¼‰ï¼šé€‚åº¦å¢åŠ å®½åº¦ */
    @media (max-width: 1920px) and (min-width: 1601px) {
      .blog-main-layout {
        max-width: 1600px !important;
        grid-template-columns: 260px 1fr 260px !important;
        gap: 1.25rem !important;
      }
    }
    
    /* ä¸­ç­‰å±å¹•ï¼ˆ1400px-1600pxï¼‰ */
    @media (max-width: 1600px) and (min-width: 1400px) {
      .blog-main-layout {
        max-width: 1400px !important;
        grid-template-columns: 220px 1fr 220px !important;
      }
    }
    
    /* å¹³æ¿é€‚é…ï¼ˆ1200px-1400pxï¼‰ */
    @media (max-width: 1400px) and (min-width: 1200px) {
      .blog-main-layout {
        grid-template-columns: 200px 1fr 200px !important;
        gap: 0.75rem !important;
      }
      .blog-sidebar-left,
      .blog-sidebar-right {
        width: 100% !important;
        max-width: 100% !important;
      }
      .blog-sidebar-left > div,
      .blog-sidebar-right > div {
        width: 100% !important;
        max-width: 100% !important;
      }
    }
    
    /* å°å¹³æ¿ï¼ˆ1024px-1200pxï¼‰ */
    @media (max-width: 1200px) and (min-width: 1024px) {
      .blog-main-layout {
        grid-template-columns: 180px 1fr 180px !important;
        gap: 0.75rem !important;
      }
      .blog-sidebar-left,
      .blog-sidebar-right {
        width: 100% !important;
        max-width: 100% !important;
      }
      .blog-sidebar-left > div,
      .blog-sidebar-right > div {
        width: 100% !important;
        max-width: 100% !important;
      }
    }
    
    /* å¹³æ¿ï¼ˆ768px-1024pxï¼‰ï¼šéšè—å³ä¾§è¾¹æ  */
    @media (max-width: 1024px) and (min-width: 768px) {
      .blog-main-layout {
        grid-template-columns: 180px 1fr !important;
        gap: 0.75rem !important;
      }
      .blog-sidebar-right {
        display: none !important;
      }
      .blog-sidebar-left {
        width: 100% !important;
        max-width: 100% !important;
      }
      .blog-sidebar-left > div {
        width: 100% !important;
        max-width: 100% !important;
      }
    }
    
    /* æ‰‹æœºç«¯é€‚é…ï¼ˆ<768pxï¼‰ */
    @media (max-width: 768px) {
      /* ç§»é™¤å¯¼èˆªæ å›ºå®šå®šä½ï¼Œè®©å®ƒå¯ä»¥æ»šåŠ¨ */
      .blog-nav {
        position: static !important;
        z-index: auto !important;
      }
      
      /* åšå®¢ä¸»é¡µå®½åº¦ä¼˜åŒ–ï¼Œç¨å¾®æ¯”å±å¹•çª„ä¸€ç‚¹ï¼Œå¢åŠ å³ä¾§è¾¹è·é€‚é…iOS */
      .blog-main-layout {
        grid-template-columns: 1fr !important;
        gap: 0.75rem !important;
        padding: 0.75rem 0.5rem !important;
        padding-left: 0.5rem !important;
        padding-right: calc(0.5rem + env(safe-area-inset-right, 0px)) !important;
        width: 100% !important;
        max-width: 100vw !important;
        box-sizing: border-box !important;
        margin: 0 !important;
        overflow-x: hidden !important;
      }
      
      @supports (padding: max(0px)) {
        .blog-main-layout {
          padding-right: max(0.5rem, calc(0.5rem + env(safe-area-inset-right))) !important;
        }
      }
      
      /* ç¡®ä¿æ‰€æœ‰å†…å®¹ä¸è¶…å‡ºå±å¹•ï¼ˆä¼˜åŒ–ï¼šå‡å°‘ !importantï¼‰ */
      .blog-content,
      .blog-sidebar-left,
      .blog-sidebar-right {
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
        padding-left: 0;
        padding-right: 0;
        overflow-x: hidden;
      }
      
      /* æ–‡ç« åˆ—è¡¨ä¸è¶…å‡º */
      .blog-posts-list {
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
        overflow-x: hidden;
      }
      
      .blog-post-item {
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
      }
      
      /* Flex å®¹å™¨é˜²æ­¢æº¢å‡ºï¼ˆå…³é”®å±æ€§ä¿ç•™ !importantï¼‰ */
      .blog-post-item > div {
        flex: 1;
        min-width: 0;
        overflow: hidden;
      }
      
      /* æ–‡æœ¬å†…å®¹é˜²æ­¢æº¢å‡º */
      .blog-post-item .blog-post-title,
      .blog-post-item .blog-post-excerpt {
        overflow: hidden;
        text-overflow: ellipsis;
        word-break: break-word;
      }
      
      /* ç¡®ä¿bodyå’Œhtmlä¸è¶…å‡ºå±å¹•ï¼Œå¢åŠ å³ä¾§è¾¹è·é€‚é…iOSï¼ˆä¼˜åŒ–ï¼šå‡å°‘ä¸å¿…è¦çš„ !importantï¼‰ */
      html, body {
        width: 100%;
        max-width: 100vw;
        overflow-x: hidden;
        box-sizing: border-box;
        /* iOSå®‰å…¨åŒºåŸŸé€‚é… - ä½¿ç”¨paddingè€Œä¸æ˜¯margin */
        padding-right: env(safe-area-inset-right, 0px);
      }
      
      /* iOSå®‰å…¨åŒºåŸŸé€‚é… */
      @supports (padding: max(0px)) {
        html, body {
          padding-right: max(0px, env(safe-area-inset-right));
        }
      }
      
      /* ç¡®ä¿æ‰€æœ‰ç›´æ¥å­å…ƒç´ ä¸è¶…å‡ºï¼ˆåªåœ¨å¿…è¦æ—¶ä½¿ç”¨ !importantï¼‰ */
      body > * {
        max-width: 100vw;
        box-sizing: border-box;
      }
      
      /* åªå¯¹å¯èƒ½æº¢å‡ºçš„å®¹å™¨ä½¿ç”¨ overflow-x: hidden */
      body > .blog-main-layout,
      body > .blog-nav {
        overflow-x: hidden;
      }
      
      /* å¯¼èˆªæ å†…å®¹ä¼˜åŒ–ï¼ˆä¼˜åŒ–ï¼šå‡å°‘ !importantï¼‰ */
      .blog-nav-content {
        padding: 0 0.75rem;
        padding-right: calc(0.75rem + env(safe-area-inset-right, 0px));
        width: 100%;
        max-width: 100vw;
        box-sizing: border-box;
        overflow-x: hidden;
      }
      
      @supports (padding: max(0px)) {
        .blog-nav-content {
          padding-right: max(0.75rem, calc(0.75rem + env(safe-area-inset-right)));
        }
      }
      
      /* å¯¼èˆªæ æœ¬èº«ä¹Ÿè¦é™åˆ¶å®½åº¦ */
      .blog-nav {
        width: 100%;
        max-width: 100vw;
        overflow-x: hidden;
        box-sizing: border-box;
      }
      .blog-sidebar-left,
      .blog-sidebar-right {
        position: static !important;
        order: 2;
        padding: 0 !important;
        width: 100% !important;
      }
      
      .blog-sidebar-left > div,
      .blog-sidebar-right > div {
        width: 100% !important;
        max-width: 100% !important;
      }
      
      .blog-taxonomy-list,
      #hotPostsList {
        width: 100% !important;
      }
      
      .blog-taxonomy-list a {
        width: 100% !important;
        box-sizing: border-box !important;
      }
      
      /* çƒ­é—¨æ–‡ç« å®¹å™¨ç§»åŠ¨ç«¯ä¼˜åŒ– */
      .blog-sidebar-left > div:first-child {
        padding: 0.5rem !important;
        margin-bottom: 0.5rem !important;
        overflow: hidden !important;
      }
      
      .blog-sidebar-left > div:first-child h3 {
        font-size: 0.75rem !important;
        margin-bottom: 0.375rem !important;
      }
      
      /* ç§»åŠ¨ç«¯çƒ­é—¨æ–‡ç« æ¨ªå‘ç´§å‡‘æ˜¾ç¤º */
      #hotPostsList {
        display: flex !important;
        flex-direction: row !important;
        gap: 0.375rem !important;
        overflow-x: auto !important;
        overflow-y: hidden !important;
        -webkit-overflow-scrolling: touch !important;
        padding: 0.25rem 0 !important;
        scrollbar-width: thin;
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
      }
      
      /* çƒ­é—¨æ–‡ç« å®¹å™¨é˜²æ­¢æº¢å‡º */
      .blog-sidebar-left > div:first-child {
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
        box-sizing: border-box !important;
      }
      
      #hotPostsList::-webkit-scrollbar {
        height: 4px;
      }
      
      #hotPostsList::-webkit-scrollbar-thumb {
        background: #d1d5db;
        border-radius: 2px;
      }
      
      #hotPostsList a {
        flex-shrink: 0 !important;
        width: auto !important;
        min-width: 100px !important;
        max-width: 150px !important;
        padding: 0.375rem 0.5rem !important;
        display: flex !important;
        flex-direction: row !important;
        align-items: center !important;
        gap: 0.375rem !important;
        border-radius: 0.25rem !important;
        background: #f9fafb !important;
        border: 1px solid #e5e7eb !important;
        box-sizing: border-box !important;
        text-decoration: none !important;
      }
      
      #hotPostsList a > span:first-child {
        width: 16px !important;
        height: 16px !important;
        font-size: 0.625rem !important;
        flex-shrink: 0 !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
      }
      
      #hotPostsList a > div {
        flex: 1 !important;
        min-width: 0 !important;
        display: flex !important;
        flex-direction: column !important;
        gap: 0.125rem !important;
        overflow: hidden !important;
      }
      
      #hotPostsList a > div > div:first-child {
        font-size: 0.6875rem !important;
        line-height: 1.2 !important;
        display: -webkit-box !important;
        -webkit-line-clamp: 2 !important;
        -webkit-box-orient: vertical !important;
        overflow: hidden !important;
        word-break: break-word !important;
        color: #374151 !important;
        font-weight: 500 !important;
        text-overflow: ellipsis !important;
      }
      
      #hotPostsList a > div > div:last-child {
        font-size: 0.625rem !important;
        color: #9ca3af !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
      }
      
      /* è¶…å°å±å¹•è¿›ä¸€æ­¥ä¼˜åŒ– */
      @media (max-width: 480px) {
        #hotPostsList {
          gap: 0.25rem !important;
        }
        
        #hotPostsList a {
          min-width: 90px !important;
          max-width: 130px !important;
          padding: 0.25rem 0.375rem !important;
          gap: 0.25rem !important;
        }
        
        #hotPostsList a > span:first-child {
          width: 14px !important;
          height: 14px !important;
          font-size: 0.5625rem !important;
        }
        
        #hotPostsList a > div > div:first-child {
          font-size: 0.625rem !important;
          -webkit-line-clamp: 1 !important;
        }
        
        #hotPostsList a > div > div:last-child {
          font-size: 0.5625rem !important;
        }
      }
      
      .blog-content {
        order: 1;
      }
      
      /* åˆ—è¡¨å®¹å™¨ä¼˜åŒ– */
      .blog-posts-list {
        gap: 0 !important;
      }
      
      .blog-post-item {
        border-bottom: 1px solid #f3f4f6 !important;
      }
      
      /* åˆ†é¡µé—´è·ä¼˜åŒ– */
      .blog-pagination {
        margin-top: 1rem !important;
        margin-bottom: 0.75rem !important;
        gap: 0.375rem !important;
      }
      
      .blog-pagination-btn {
        min-width: 32px !important;
        height: 32px !important;
        padding: 0 0.5rem !important;
        font-size: 0.8125rem !important;
      }
      
      /* ç§»åŠ¨ç«¯åˆ—è¡¨é¡¹ä¼˜åŒ– - æ¨ªå‘ç´§å‡‘å¸ƒå±€ï¼Œä¸€è¡Œæ˜¾ç¤º */
      .blog-post-item,
      article.blog-post-item {
        flex-direction: row !important;
        align-items: center !important;
        padding: 0.5rem 0.75rem !important;
        gap: 0.5rem !important;
        min-height: auto !important;
        display: flex !important;
        position: relative !important;
      }
      
      /* ç¼–è¾‘æŒ‰é’®ç§»åŠ¨ç«¯ä¼˜åŒ– - è°ƒæ•´ä½ç½®é¿å…é®æŒ¡ */
      .blog-post-item .blog-post-edit-btn {
        position: absolute !important;
        top: 0.5rem !important;
        right: 0.5rem !important;
        z-index: 10 !important;
        width: 24px !important;
        height: 24px !important;
        padding: 0.25rem !important;
      }
      
      /* ä¸­é—´å†…å®¹åŒºåŸŸç§»åŠ¨ç«¯æ·»åŠ å³è¾¹è·ï¼Œé¿å…è¢«ç¼–è¾‘æŒ‰é’®é®æŒ¡ */
      .blog-post-item > div:nth-of-type(2) {
        padding-right: 2rem;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      
      /* æ ‡é¢˜é˜²æ­¢æº¢å‡º */
      .blog-post-item .blog-post-title {
        overflow: hidden;
        text-overflow: ellipsis;
        word-break: break-word;
      }
      
      /* å›¾ç‰‡ç¼©å° - ç¼©ç•¥å›¾å¯ç‚¹å‡» */
      .blog-post-item > a:first-child {
        width: 50px !important;
        height: 50px !important;
        flex-shrink: 0 !important;
        display: block !important;
      }
      
      /* éšè—å³ä¾§å…ƒä¿¡æ¯ */
      .blog-post-item > div:last-child {
        display: none !important;
      }
      
      /* ä¸­é—´å†…å®¹åŒºåŸŸä¼˜åŒ– */
      .blog-post-item > div:nth-of-type(2) {
        flex: 1 !important;
        min-width: 0 !important;
        gap: 0.25rem !important;
      }
      
      /* æ ‡é¢˜å’Œåˆ†ç±»ä¸€è¡Œæ˜¾ç¤º */
      .blog-post-item > div:nth-of-type(2) > div:first-child {
        display: flex !important;
        align-items: center !important;
        gap: 0.375rem !important;
        flex-wrap: wrap !important;
      }
      
      /* æ ‡é¢˜æ ·å¼ä¼˜åŒ– */
      .blog-post-item .blog-post-title {
        font-size: 0.875rem !important;
        line-height: 1.3 !important;
        -webkit-line-clamp: 2 !important;
        flex: 1 !important;
        min-width: 0 !important;
      }
      
      /* åˆ†ç±»æ ‡ç­¾ç¼©å° */
      .blog-post-item .blog-post-title + a {
        font-size: 0.6875rem !important;
        padding: 0.125rem 0.375rem !important;
        white-space: nowrap !important;
        flex-shrink: 0 !important;
      }
      
      /* æ‘˜è¦éšè—æˆ–å•è¡Œæ˜¾ç¤º */
      .blog-post-item .blog-post-excerpt {
        font-size: 0.75rem !important;
        -webkit-line-clamp: 1 !important;
        margin: 0 !important;
        display: none !important; /* æ‰‹æœºç«¯éšè—æ‘˜è¦ä»¥èŠ‚çœç©ºé—´ */
      }
      
      /* åº•éƒ¨ä¿¡æ¯è¡Œä¼˜åŒ– */
      .blog-post-item > div:nth-of-type(2) > div:last-child {
        font-size: 0.6875rem !important;
        gap: 0.5rem !important;
        margin-top: 0.125rem !important;
      }
      
      /* åº•éƒ¨ä¿¡æ¯å›¾æ ‡å’Œæ–‡å­— */
      .blog-post-item > div:nth-child(2) > div:last-child span {
        font-size: 0.6875rem !important;
      }
      
      .blog-post-item > div:nth-child(2) > div:last-child svg {
        width: 10px !important;
        height: 10px !important;
      }
      .blog-nav-content {
        flex-direction: column;
        gap: 0.75rem;
        padding: 0.75rem 0;
      }
      .blog-nav-actions {
        width: 100%;
      }
      .blog-search {
        max-width: 100% !important;
      }
    }
    
    /* å°æ‰‹æœºï¼ˆ<480pxï¼‰ï¼šè¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œæ›´ç´§å‡‘ */
    @media (max-width: 480px) {
      .blog-post-item {
        padding: 0.375rem 0.5rem !important;
        gap: 0.375rem !important;
      }
      
      .blog-post-item > a:first-child {
        width: 40px !important;
        height: 40px !important;
      }
      
      .blog-post-title {
        font-size: 0.8125rem !important;
        line-height: 1.25 !important;
      }
      
      .blog-post-item .blog-post-title + a {
        font-size: 0.625rem !important;
        padding: 0.125rem 0.25rem !important;
      }
      
      .blog-post-item > div:nth-child(2) > div:last-child {
        font-size: 0.625rem !important;
        gap: 0.375rem !important;
      }
      
      .blog-post-item > div:nth-child(2) > div:last-child svg {
        width: 9px !important;
        height: 9px !important;
      }
    }
  </style>

  <!-- é¡µè„š -->
  <footer class="blog-footer">
    <div class="blog-footer-content">
      <div class="blog-footer-text">Â© 2024 DevBlog. All rights reserved.</div>
      <div class="blog-footer-links">
        <a href="/feed.xml" class="blog-footer-link" title="RSS è®¢é˜…">RSS</a>
      </div>
    </div>
  </footer>

  <!-- è„šæœ¬ -->
  <script src="/utils/blog.js"></script>
  <script>
    // å½“å‰é¡µç 
    let currentPage = 1;
    const pageSize = 12; // å¢åŠ æ¯é¡µæ˜¾ç¤ºæ•°é‡
    let totalPages = 1;
    let currentCategory = null;
    let currentSearch = null;
    let viewMode = 'posts'; // 'posts' æˆ– 'archive'
    let isAdminLoggedIn = false; // ç®¡ç†å‘˜ç™»å½•çŠ¶æ€

    // åˆå§‹åŒ–ç²’å­èƒŒæ™¯
    function initParticles() {
      const container = document.getElementById('particles');
      const particleCount = 50;
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        const size = Math.random() * 100 + 50;
        particle.style.width = size + 'px';
        particle.style.height = size + 'px';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 20 + 's';
        particle.style.opacity = Math.random() * 0.3 + 0.1;
        container.appendChild(particle);
      }
    }

    // å¯çˆ±çš„åŠ è½½æç¤ºæ–‡å­—æ•°ç»„
    const postsLoadingMessages = [
      'ğŸ“š æ­£åœ¨æ•´ç†æ–‡ç« åˆ—è¡¨...',
      'âœ¨ é­”æ³•æ­£åœ¨å‘ç”Ÿä¸­...',
      'ğŸ± å°çŒ«å’ªæ­£åœ¨å¸®ä½ æ‰¾æ–‡ç« ...',
      'ğŸš€ åŠ é€ŸåŠ è½½ä¸­...',
      'ğŸ’« æ–‡ç« ä»¬æ­£åœ¨èµ¶æ¥...',
      'ğŸ¨ æ­£åœ¨ç¾åŒ–æ–‡ç« åˆ—è¡¨...',
      'ğŸŒŸ é©¬ä¸Šå°±å¥½å•¦...',
      'ğŸ“– æ­£åœ¨ç¿»é˜…æ–‡ç« åº“...',
      'ğŸ¯ ç²¾å‡†å®šä½æ–‡ç« ä¸­...',
      'ğŸ’¡ çµæ„Ÿæ­£åœ¨åŠ è½½...'
    ];
    
    // å¯çˆ±çš„è¡¨æƒ…ç¬¦å·æ•°ç»„
    const postsLoadingEmojis = [
      'ğŸ“šâœ¨', 'ğŸ±', 'ğŸš€', 'ğŸ’«', 'ğŸ¨', 'ğŸŒŸ', 'ğŸ“–', 'ğŸ¯', 'ğŸ’¡', 'âœ¨'
    ];
    
    // æ›´æ–°åŠ è½½æç¤ºæ–‡å­—å’Œè¡¨æƒ…
    function updatePostsLoadingMessage() {
      const loadingText = document.getElementById('postsLoadingText');
      const loadingEmoji = document.getElementById('postsLoadingEmoji');
      
      if (loadingText) {
        const randomMessage = postsLoadingMessages[Math.floor(Math.random() * postsLoadingMessages.length)];
        loadingText.textContent = randomMessage;
      }
      
      if (loadingEmoji) {
        const randomEmoji = postsLoadingEmojis[Math.floor(Math.random() * postsLoadingEmojis.length)];
        loadingEmoji.textContent = randomEmoji;
        // æ·»åŠ æ—‹è½¬åŠ¨ç”»
        loadingEmoji.style.animation = 'rotateEmoji 2s ease-in-out infinite';
      }
    }

    // åŠ è½½æ–‡ç« åˆ—è¡¨
    async function loadPosts(page = 1) {
      // æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨ï¼ˆå¹³æ»‘æ»šåŠ¨ï¼‰
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
      
      const loadingAnimation = document.getElementById('postsLoadingAnimation');
      const postsGrid = document.getElementById('postsGrid');
      const progressBar = document.getElementById('postsLoadingProgressBar');
      
      try {
        // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
        if (loadingAnimation) {
          loadingAnimation.style.display = 'block';
        }
        if (postsGrid) {
          postsGrid.style.display = 'none';
        }
        
        // åˆå§‹åŒ–åŠ è½½æç¤º
        updatePostsLoadingMessage();
        
        // æ¯2ç§’æ›´æ–°ä¸€æ¬¡åŠ è½½æç¤ºï¼Œè®©ç­‰å¾…æ›´æœ‰è¶£
        const messageInterval = setInterval(() => {
          updatePostsLoadingMessage();
        }, 2000);
        
        // æ¨¡æ‹Ÿè¿›åº¦åŠ¨ç”»
        let progress = 0;
        const progressInterval = setInterval(() => {
          progress += Math.random() * 5 + 2; // éšæœºå¢åŠ 2-7%
          if (progressBar && progress < 85) {
            progressBar.style.width = Math.min(progress, 85) + '%';
          }
        }, 150);
        
        const options = {
          page,
          pageSize,
          published: 'true'
        };
        
        if (currentCategory) {
          options.category = currentCategory;
        }
        if (currentSearch) {
          options.search = currentSearch;
        }
        
        const response = await getPosts(options);
        
        // æ¸…é™¤è¿›åº¦åŠ¨ç”»å’Œæ¶ˆæ¯æ›´æ–°
        clearInterval(progressInterval);
        clearInterval(messageInterval);
        
        if (response.success) {
          // æ›´æ–°åŠ è½½æç¤ºä¸ºæˆåŠŸæ¶ˆæ¯
          const loadingText = document.getElementById('postsLoadingText');
          const loadingEmoji = document.getElementById('postsLoadingEmoji');
          if (loadingText) {
            loadingText.textContent = `âœ… æˆåŠŸåŠ è½½ ${response.data.length} ç¯‡æ–‡ç« ï¼`;
            loadingText.style.color = '#10b981';
          }
          if (loadingEmoji) {
            loadingEmoji.textContent = 'ğŸ‰';
            loadingEmoji.style.animation = 'bounce 0.5s ease-in-out 3';
          }
          
          // å®Œæˆè¿›åº¦æ¡
          if (progressBar) {
            progressBar.style.width = '100%';
          }
          
          // å»¶è¿Ÿæ˜¾ç¤ºå†…å®¹ï¼Œè®©ç”¨æˆ·çœ‹åˆ°æˆåŠŸçŠ¶æ€
          setTimeout(() => {
            displayPosts(response.data);
            currentPage = response.pagination.currentPage;
            totalPages = response.pagination.totalPages;
            displayPagination();
            
            // éšè—åŠ è½½åŠ¨ç”»ï¼Œæ˜¾ç¤ºå†…å®¹
            if (loadingAnimation) {
              loadingAnimation.style.display = 'none';
            }
            if (postsGrid) {
              postsGrid.style.display = 'flex';
            }
            
            // é‡ç½®åŠ è½½æç¤º
            if (loadingText) {
              loadingText.textContent = 'æ­£åœ¨åŠ è½½æ–‡ç« ...';
              loadingText.style.color = '#6b7280';
            }
            if (loadingEmoji) {
              loadingEmoji.textContent = 'ğŸ“šâœ¨';
              loadingEmoji.style.animation = 'bounce 1s ease-in-out infinite';
            }
            if (progressBar) {
              progressBar.style.width = '0%';
            }
            
            // æ›´æ–°ç¼–è¾‘æŒ‰é’®æ˜¾ç¤º
            if (isAdminLoggedIn) {
              updateEditButtons();
            }
          }, 500);
        } else {
          // éšè—åŠ è½½åŠ¨ç”»
          if (loadingAnimation) {
            loadingAnimation.style.display = 'none';
          }
          if (postsGrid) {
            postsGrid.style.display = 'flex';
          }
          showToast('åŠ è½½æ–‡ç« å¤±è´¥', 'error');
        }
      } catch (error) {
        console.error('åŠ è½½æ–‡ç« å¤±è´¥:', error);
        // éšè—åŠ è½½åŠ¨ç”»
        if (loadingAnimation) {
          loadingAnimation.style.display = 'none';
        }
        if (postsGrid) {
          postsGrid.style.display = 'flex';
        }
        showToast('åŠ è½½æ–‡ç« å¤±è´¥: ' + error.message, 'error');
        document.getElementById('postsGrid').innerHTML = '<div class="blog-empty">åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•</div>';
      }
    }

    // å½’æ¡£åŠ è½½æç¤ºæ–‡å­—æ•°ç»„
    const archiveLoadingMessages = [
      'ğŸ“‚ æ­£åœ¨æ•´ç†å½’æ¡£æ–‡ç« ...',
      'ğŸ—‚ï¸ æ­£åœ¨åˆ†ç±»æ•´ç†ä¸­...',
      'ğŸ“… æ­£åœ¨æŒ‰æ—¶é—´æ’åº...',
      'âœ¨ é­”æ³•æ•´ç†ä¸­...',
      'ğŸ¯ ç²¾å‡†å½’æ¡£ä¸­...',
      'ğŸŒŸ é©¬ä¸Šå°±å¥½å•¦...',
      'ğŸ“š æ­£åœ¨ç¿»é˜…æ–‡ç« åº“...',
      'ğŸ’« å½’æ¡£é­”æ³•è¿›è¡Œä¸­...'
    ];
    
    // å½’æ¡£è¡¨æƒ…ç¬¦å·æ•°ç»„
    const archiveLoadingEmojis = [
      'ğŸ“‚âœ¨', 'ğŸ—‚ï¸', 'ğŸ“…', 'âœ¨', 'ğŸ¯', 'ğŸŒŸ', 'ğŸ“š', 'ğŸ’«'
    ];
    
    // æ›´æ–°å½’æ¡£åŠ è½½æç¤º
    function updateArchiveLoadingMessage() {
      const loadingText = document.getElementById('archiveLoadingText');
      const loadingEmoji = document.getElementById('archiveLoadingEmoji');
      
      if (loadingText) {
        const randomMessage = archiveLoadingMessages[Math.floor(Math.random() * archiveLoadingMessages.length)];
        loadingText.textContent = randomMessage;
      }
      
      if (loadingEmoji) {
        const randomEmoji = archiveLoadingEmojis[Math.floor(Math.random() * archiveLoadingEmojis.length)];
        loadingEmoji.textContent = randomEmoji;
        loadingEmoji.style.animation = 'rotateEmoji 2s ease-in-out infinite';
      }
    }

    // å½’æ¡£æ–‡ç« ç¼“å­˜
    let archiveCache = null;
    let archiveCacheKey = null;
    
    // åŠ è½½å½’æ¡£æ–‡ç« ï¼ˆæŒ‰æ—¶é—´åˆ†ç»„ï¼‰
    async function loadArchive() {
      const archiveContainer = document.getElementById('archiveContainer');
      const progressContainer = document.getElementById('archiveLoadingProgress');
      const progressBar = document.getElementById('archiveLoadingProgressBar');
      
      try {
        // æ„å»ºç¼“å­˜é”®
        const cacheKey = JSON.stringify({
          category: currentCategory,
          search: currentSearch
        });
        
        // æ£€æŸ¥ç¼“å­˜ï¼ˆä»…åœ¨æ²¡æœ‰ä»»ä½•ç­›é€‰æ¡ä»¶æ—¶ä½¿ç”¨ç¼“å­˜ï¼‰
        if (!currentCategory && !currentSearch && archiveCache && archiveCacheKey === cacheKey) {
          console.log('ä½¿ç”¨ç¼“å­˜çš„å½’æ¡£æ•°æ®');
          displayArchive(archiveCache);
          if (isAdminLoggedIn) {
            updateEditButtons();
          }
          return;
        }
        
        // æ˜¾ç¤ºè¿›åº¦æ¡
        if (progressContainer) {
          progressContainer.style.display = 'block';
        }
        if (progressBar) {
          progressBar.style.width = '0%';
        }
        if (archiveContainer) {
          archiveContainer.innerHTML = '';
        }
        
        // æ„å»ºæŸ¥è¯¢é€‰é¡¹
        const options = {
          published: 'true',
          pageSize: 10000
        };
        
        // åº”ç”¨åˆ†ç±»ç­›é€‰
        if (currentCategory) {
          options.category = currentCategory;
        }
        
        // åº”ç”¨æœç´¢
        if (currentSearch) {
          options.search = currentSearch;
        }
        
        // åˆå§‹åŒ–åŠ è½½æç¤º
        updateArchiveLoadingMessage();
        
        // æ¯2ç§’æ›´æ–°ä¸€æ¬¡åŠ è½½æç¤º
        const messageInterval = setInterval(() => {
          updateArchiveLoadingMessage();
        }, 2000);
        
        // æ¨¡æ‹Ÿè¿›åº¦æ›´æ–°
        let progress = 0;
        const progressInterval = setInterval(() => {
          progress += Math.random() * 4 + 2; // éšæœºå¢åŠ 2-6%
          if (progress < 85 && progressBar) {
            progressBar.style.width = Math.min(progress, 85) + '%';
          }
        }, 120);
        
        // è·å–æ‰€æœ‰æ–‡ç« ï¼ˆä½¿ç”¨ä¸€ä¸ªå¾ˆå¤§çš„pageSizeï¼Œè¶³å¤Ÿè·å–æ‰€æœ‰æ–‡ç« ï¼‰
        const response = await getPosts(options);
        
        // æ¸…é™¤è¿›åº¦åŠ¨ç”»å’Œæ¶ˆæ¯æ›´æ–°
        clearInterval(progressInterval);
        clearInterval(messageInterval);
        
        if (response.success) {
          const posts = response.data || [];
          
          // æ›´æ–°åŠ è½½æç¤ºä¸ºæˆåŠŸæ¶ˆæ¯
          const loadingText = document.getElementById('archiveLoadingText');
          const loadingEmoji = document.getElementById('archiveLoadingEmoji');
          if (loadingText) {
            loadingText.textContent = `âœ… æˆåŠŸæ•´ç† ${posts.length} ç¯‡æ–‡ç« ï¼`;
            loadingText.style.color = '#10b981';
          }
          if (loadingEmoji) {
            loadingEmoji.textContent = 'ğŸ‰';
            loadingEmoji.style.animation = 'bounce 0.5s ease-in-out 3';
          }
          
          // æ›´æ–°è¿›åº¦æ¡
          if (progressBar) {
            progressBar.style.width = '100%';
          }
          
          // ç¼“å­˜æ•°æ®ï¼ˆä»…åœ¨æ²¡æœ‰ä»»ä½•ç­›é€‰æ¡ä»¶æ—¶ç¼“å­˜ï¼‰
          if (!currentCategory && !currentSearch) {
            archiveCache = posts;
            archiveCacheKey = cacheKey;
          }
          
          // å»¶è¿Ÿæ˜¾ç¤ºï¼Œè®©ç”¨æˆ·çœ‹åˆ°å®ŒæˆçŠ¶æ€
          setTimeout(() => {
            displayArchive(posts);
            
            // éšè—è¿›åº¦æ¡
            if (progressContainer) {
              progressContainer.style.display = 'none';
            }
            if (progressBar) {
              progressBar.style.width = '0%';
            }
            
            // é‡ç½®åŠ è½½æç¤º
            if (loadingText) {
              loadingText.textContent = 'æ­£åœ¨æ•´ç†å½’æ¡£æ–‡ç« ...';
              loadingText.style.color = '#6b7280';
            }
            if (loadingEmoji) {
              loadingEmoji.textContent = 'ğŸ“‚âœ¨';
              loadingEmoji.style.animation = 'bounce 1s ease-in-out infinite';
            }
            
            // æ›´æ–°ç¼–è¾‘æŒ‰é’®æ˜¾ç¤º
            if (isAdminLoggedIn) {
              updateEditButtons();
            }
          }, 500);
        } else {
          // éšè—è¿›åº¦æ¡
          if (progressContainer) {
            progressContainer.style.display = 'none';
          }
          if (progressBar) {
            progressBar.style.width = '0%';
          }
          showToast('åŠ è½½å½’æ¡£å¤±è´¥', 'error');
          if (archiveContainer) {
            archiveContainer.innerHTML = '<div class="blog-empty">åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•</div>';
          }
        }
      } catch (error) {
        console.error('åŠ è½½å½’æ¡£å¤±è´¥:', error);
        // éšè—è¿›åº¦æ¡
        if (progressContainer) {
          progressContainer.style.display = 'none';
        }
        if (progressBar) {
          progressBar.style.width = '0%';
        }
        showToast('åŠ è½½å½’æ¡£å¤±è´¥: ' + error.message, 'error');
        if (archiveContainer) {
          archiveContainer.innerHTML = '<div class="blog-empty">åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•</div>';
        }
      }
    }

    // æ˜¾ç¤ºå½’æ¡£æ–‡ç« ï¼ˆæŒ‰æ—¶é—´åˆ†ç»„ï¼‰
    function displayArchive(posts) {
      const container = document.getElementById('archiveContainer');
      
      if (!posts || posts.length === 0) {
        let emptyMessage = '<div class="blog-empty">æš‚æ— æ–‡ç« </div>';
        
        // å¦‚æœæœ‰ç­›é€‰æ¡ä»¶ï¼Œæ˜¾ç¤ºæ¸…é™¤ç­›é€‰çš„æç¤º
        if (currentCategory || currentSearch) {
          emptyMessage = `
            <div class="blog-empty">
              <div style="margin-bottom: 1rem;">æš‚æ— ç¬¦åˆæ¡ä»¶çš„æ–‡ç« </div>
              <button onclick="clearFilters()" style="padding: 0.5rem 1rem; background: #9333ea; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">
                æ¸…é™¤ç­›é€‰æ¡ä»¶
              </button>
            </div>
          `;
        }
        
        container.innerHTML = emptyMessage;
        return;
      }

      // æ˜¾ç¤ºç­›é€‰çŠ¶æ€
      let filterInfo = '';
      if (currentCategory || currentSearch) {
        const filters = [];
        if (currentCategory) filters.push(`åˆ†ç±»: ${currentCategory}`);
        if (currentSearch) filters.push(`æœç´¢: ${currentSearch}`);
        
        filterInfo = `
          <div style="margin-bottom: 2rem; padding: 1rem; background: #f3f4f6; border-radius: 0.5rem; display: flex; justify-content: space-between; align-items: center;">
            <div>
              <span style="color: #6b7280; font-size: 0.875rem;">ç­›é€‰æ¡ä»¶: </span>
              <span style="color: #1f2937; font-weight: 500;">${filters.join(' â€¢ ')}</span>
              <span style="color: #6b7280; font-size: 0.875rem; margin-left: 1rem;">å…± ${posts.length} ç¯‡æ–‡ç« </span>
            </div>
            <button onclick="clearFilters()" style="padding: 0.5rem 1rem; background: #9333ea; color: white; border: none; border-radius: 0.5rem; cursor: pointer; font-size: 0.875rem;">
              æ¸…é™¤ç­›é€‰
            </button>
          </div>
        `;
      }

      // æŒ‰å¹´æœˆåˆ†ç»„
      const groupedByYearMonth = {};
      posts.forEach(post => {
        const date = new Date(post.createdAt || post.created_at || Date.now());
        const year = date.getFullYear();
        const month = date.getMonth() + 1;
        const yearMonth = `${year}å¹´${month}æœˆ`;
        
        if (!groupedByYearMonth[yearMonth]) {
          groupedByYearMonth[yearMonth] = [];
        }
        groupedByYearMonth[yearMonth].push(post);
      });

      // æŒ‰æ—¶é—´å€’åºæ’åˆ—
      const sortedGroups = Object.keys(groupedByYearMonth).sort((a, b) => {
        const dateA = new Date(a.replace('å¹´', '-').replace('æœˆ', ''));
        const dateB = new Date(b.replace('å¹´', '-').replace('æœˆ', ''));
        return dateB - dateA;
      });

      let html = filterInfo;
      sortedGroups.forEach(yearMonth => {
        const postsInMonth = groupedByYearMonth[yearMonth];
        html += `<div class="blog-archive-group" style="margin-bottom: 3rem;">
          <h2 class="blog-archive-title" style="font-size: 1.5rem; font-weight: 600; color: #1f2937; margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid #e5e7eb;">${yearMonth}</h2>
          <div class="blog-archive-posts" style="display: grid; gap: 1rem;">
        `;
        
        postsInMonth.forEach(post => {
          const date = formatDate(post.createdAt || post.created_at);
          const category = post.category || post._sourceApiName || '';
          html += `
            <div class="blog-archive-item" style="padding: 1rem; background: white; border-radius: 0.5rem; border: 1px solid #e5e7eb; transition: all 0.2s; position: relative;">
              ${isAdminLoggedIn ? `
                <button class="blog-post-edit-btn" onclick="editPost('${post.id}'); event.stopPropagation();" title="ç¼–è¾‘æ–‡ç« " style="display: ${isAdminLoggedIn ? 'inline-flex' : 'none'}; position: absolute; top: 0.75rem; right: 0.75rem;">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                  </svg>
                </button>
              ` : ''}
              <div style="display: flex; justify-content: space-between; align-items: start; gap: 1rem;">
                <div style="flex: 1;">
                  <a href="/blog-detail.html?slug=${encodeURIComponent(post.slug)}" style="font-size: 1.125rem; font-weight: 600; color: #1f2937; text-decoration: none; display: block; margin-bottom: 0.5rem; transition: color 0.2s;" 
                     onmouseover="this.style.color='#d97706'" 
                     onmouseout="this.style.color='#1f2937'">
                    ${escapeHtml(post.name || post.title || 'æœªå‘½å')}
                  </a>
                  <div style="display: flex; align-items: center; gap: 1rem; font-size: 0.875rem; color: #6b7280;">
                    <span>${date}</span>
                    ${category ? `<span style="color: #d97706;">#${escapeHtml(category)}</span>` : ''}
                  </div>
                </div>
              </div>
            </div>
          `;
        });
        
        html += `</div></div>`;
      });

      container.innerHTML = html;
    }

    // æ¸…é™¤ç­›é€‰æ¡ä»¶
    function clearFilters() {
      currentCategory = null;
      currentSearch = null;
      currentPage = 1;
      
      // æ¸…é™¤å½’æ¡£ç¼“å­˜
      archiveCache = null;
      archiveCacheKey = null;
      
      // æ¸…é™¤æœç´¢æ¡†
      const searchInput = document.getElementById('searchInput');
      if (searchInput) {
        searchInput.value = '';
      }
      
      // æ›´æ–°åˆ†ç±»æ˜¾ç¤º
      loadCategories();
      
      // æ ¹æ®å½“å‰è§†å›¾æ¨¡å¼é‡æ–°åŠ è½½
      if (viewMode === 'archive') {
        loadArchive();
      } else {
        loadPosts(1);
      }
      
      showToast('å·²æ¸…é™¤ç­›é€‰æ¡ä»¶', 'info');
    }

    // åˆ‡æ¢è§†å›¾æ¨¡å¼
    function switchViewMode(mode) {
      viewMode = mode;
      
      if (mode === 'posts') {
        document.getElementById('posts').style.display = 'block';
        document.getElementById('archive').style.display = 'none';
        loadPosts(1);
      } else if (mode === 'archive') {
        document.getElementById('posts').style.display = 'none';
        document.getElementById('archive').style.display = 'block';
        loadArchive();
      }
    }

    // æ˜¾ç¤ºæ–‡ç« åˆ—è¡¨ï¼ˆè®ºå›é£æ ¼ï¼‰
    function displayPosts(posts) {
      const grid = document.getElementById('postsGrid');
      
      if (!posts || posts.length === 0) {
        grid.innerHTML = '<div class="blog-empty" style="padding: 2rem; text-align: center; color: #9ca3af;">æš‚æ— æ–‡ç« </div>';
        return;
      }
      
      grid.innerHTML = posts.map((post, index) => {
        const imageUrl = post.image || '';
        const date = formatDate(post.createdAt || post.created_at);
        // categoryå­—æ®µä½œä¸ºæ ‡ç­¾ä½¿ç”¨
        const category = post.category || post._sourceApiName || '';
        const apiName = post._sourceApiName || '';
        
        // æ£€æŸ¥æ˜¯å¦æ˜¯ç‰¹æ®Šç±»åˆ«ï¼Œéœ€è¦å®šåˆ¶æ˜¾ç¤º
        const isExchangeRate = apiName.toLowerCase().includes('exchange') || apiName.toLowerCase().includes('æ±‡ç‡');
        const isTranslation = apiName.toLowerCase().includes('translation') || apiName.toLowerCase().includes('ç¿»è¯‘');
        const isWeather = apiName.toLowerCase().includes('weather') || apiName.toLowerCase().includes('å¤©æ°”');
        
        // è®ºå›é£æ ¼ï¼šæ‰€æœ‰å†…å®¹éƒ½è½¬æ¢ä¸ºæ‘˜è¦å½¢å¼
        let excerpt = '';
        
        if (isWeather && post._originalData) {
          // å¤©æ°”è·¯å†µï¼šæ˜¾ç¤ºé¢„è­¦æ‘˜è¦
          if (post._originalData.globalAlert && post._originalData.globalAlert.message) {
            const message = post._originalData.globalAlert.message;
            excerpt = 'âš ï¸ ' + truncate(message, 60);
            const infoParts = [];
            if (post._originalData.attractions && post._originalData.attractions.length > 0) {
              infoParts.push(`${post._originalData.attractions.length}ä¸ªæ™¯ç‚¹`);
            }
            if (post._originalData.traffic && post._originalData.traffic.length > 0) {
              infoParts.push(`${post._originalData.traffic.length}æ¡è·¯å†µ`);
            }
            if (infoParts.length > 0) {
              excerpt += ' â€¢ ' + infoParts.join(' â€¢ ');
            }
          } else {
            excerpt = truncate(post.excerpt || post.description || '', 80);
          }
        } else if (isExchangeRate && post._originalData) {
          // æ±‡ç‡è½¬æ¢ï¼šæ˜¾ç¤ºç®€è¦æ±‡ç‡ä¿¡æ¯
          const excludeFields = ['id', 'name', 'title', 'slug', 'excerpt', 'description', 'htmlContent', 'image', 'category', 'published', 'views', 'createdAt', 'updatedAt', 'detailApi', 'updateTime'];
          const currencies = Object.keys(post._originalData).filter(k => 
            !excludeFields.includes(k) && 
            post._originalData[k] && 
            typeof post._originalData[k] === 'object' && 
            !Array.isArray(post._originalData[k])
          );
          
          if (currencies.length > 0) {
            const firstCurrency = currencies[0];
            const firstRate = post._originalData[firstCurrency];
            if (firstRate && typeof firstRate === 'object') {
              const firstTarget = Object.keys(firstRate)[0];
              const rateValue = firstRate[firstTarget];
              if (typeof rateValue === 'number') {
                excerpt = `${firstCurrency} â†’ ${firstTarget}: ${rateValue.toFixed(4)}`;
                if (currencies.length > 1) {
                  excerpt += ` (å…±${currencies.length}ç§)`;
                }
              } else {
                excerpt = truncate(post.excerpt || post.description || '', 80);
              }
            } else {
              excerpt = truncate(post.excerpt || post.description || '', 80);
            }
          } else {
            excerpt = truncate(post.excerpt || post.description || '', 80);
          }
        } else if (isTranslation && post._originalData) {
          // ç¿»è¯‘å¡ç‰‡ï¼šæ˜¾ç¤ºä¸­é˜¿å¯¹ç…§æ‘˜è¦
          if (post._originalData.chinese && post._originalData.arabic) {
            excerpt = `${escapeHtml(truncate(post._originalData.chinese, 35))} / ${escapeHtml(truncate(post._originalData.arabic, 35))}`;
          } else {
            excerpt = truncate(post.excerpt || post.description || '', 80);
          }
        } else {
          excerpt = truncate(post.excerpt || post.description || '', 80);
        }
        
        const views = post.views || 0;
        const comments = post.comments || 0;
        
        // è®ºå›é£æ ¼ï¼šç®€æ´åˆ—è¡¨å¸ƒå±€
        return `
          <article class="blog-post-item" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; border-bottom: 1px solid #f3f4f6; background: white; transition: background 0.2s; position: relative;" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
            ${isAdminLoggedIn ? `
              <button class="blog-post-edit-btn" onclick="editPost('${post.id}'); event.stopPropagation();" title="ç¼–è¾‘æ–‡ç« " style="display: ${isAdminLoggedIn ? 'inline-flex' : 'none'}; position: absolute; top: 0.5rem; right: 0.5rem; z-index: 10; background: rgba(255,255,255,0.95); backdrop-filter: blur(4px); border: 1px solid #e5e7eb; border-radius: 0.25rem; padding: 0.25rem; cursor: pointer; opacity: 0.6;" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.6'">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                  <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
              </button>
            ` : ''}
            <!-- å·¦ä¾§ç¼©ç•¥å›¾ - å¯ç‚¹å‡»è·³è½¬ -->
            <a href="/blog-detail.html?slug=${encodeURIComponent(post.slug)}" style="flex-shrink: 0; width: 60px; height: 60px; border-radius: 0.25rem; overflow: hidden; background: linear-gradient(to bottom right, #f5f5f5, #e5e5e5); display: block; text-decoration: none; cursor: pointer; transition: opacity 0.2s;" onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='1'">
              ${imageUrl ? `<img src="${imageUrl}" alt="${escapeHtml(post.name || post.title || '')}" loading="lazy" style="width: 100%; height: 100%; object-fit: cover; display: block;">` : '<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:#9ca3af;font-size:1.25rem;">ğŸ“„</div>'}
            </a>
            <!-- ä¸­é—´å†…å®¹åŒº -->
            <div style="flex: 1; min-width: 0; display: flex; flex-direction: column; gap: 0.375rem; padding-right: ${isAdminLoggedIn ? '2rem' : '0'};">
              <div style="display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap;">
                <a href="/blog-detail.html?slug=${encodeURIComponent(post.slug)}" class="blog-post-title" style="font-size: 0.9375rem; font-weight: 600; color: #111827; text-decoration: none; line-height: 1.4; flex: 1; min-width: 0; display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; overflow: hidden;" onmouseover="this.style.color='#d97706'" onmouseout="this.style.color='#111827'">
                  ${escapeHtml(post.name || post.title || 'æœªå‘½å')}
                </a>
                ${category ? `<a href="#" onclick="filterByCategory('${escapeHtml(category)}'); return false;" style="display: inline-flex; align-items: center; padding: 0.1875rem 0.5rem; background: #f3f4f6; color: #6b7280; border-radius: 0.25rem; font-size: 0.75rem; font-weight: 500; text-decoration: none; transition: background 0.2s; white-space: nowrap;" onmouseover="this.style.background='#e5e7eb'" onmouseout="this.style.background='#f3f4f6'">${escapeHtml(category)}</a>` : ''}
              </div>
              ${excerpt ? `<p class="blog-post-excerpt" style="font-size: 0.8125rem; color: #6b7280; line-height: 1.4; margin: 0; display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; overflow: hidden;">${escapeHtml(excerpt)}</p>` : ''}
              <div style="display: flex; align-items: center; gap: 1rem; font-size: 0.75rem; color: #9ca3af;">
                <span style="display: inline-flex; align-items: center; gap: 0.25rem;">
                  <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                  ${date}
                </span>
                <span style="display: inline-flex; align-items: center; gap: 0.25rem;">
                  <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg>
                  ${views}
                </span>
                ${comments > 0 ? `<span style="display: inline-flex; align-items: center; gap: 0.25rem;">
                  <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                  </svg>
                  ${comments}
                </span>` : ''}
              </div>
            </div>
            <!-- å³ä¾§å…ƒä¿¡æ¯ -->
            <div style="flex-shrink: 0; text-align: right; min-width: 80px; display: flex; flex-direction: column; gap: 0.25rem; padding-right: ${isAdminLoggedIn ? '2.5rem' : '0'};">
              <div style="font-size: 0.75rem; color: #9ca3af; white-space: nowrap;">${date.split(' ')[0]}</div>
              ${views > 0 ? `<div style="font-size: 0.6875rem; color: #d1d5db;">${views} æ¬¡</div>` : ''}
            </div>
          </article>
        `;
      }).join('');
    }

    // æ˜¾ç¤ºåˆ†é¡µï¼ˆä¼˜åŒ–æ˜¾ç¤ºæ›´å¤šé¡µç ï¼‰
    function displayPagination() {
      const pagination = document.getElementById('pagination');
      
      if (totalPages <= 1) {
        pagination.innerHTML = '';
        return;
      }
      
      let html = '';
      
      // ä¸Šä¸€é¡µ
      if (currentPage > 1) {
        html += `<a href="#" class="blog-pagination-btn" onclick="loadPosts(${currentPage - 1}); return false;" style="display: inline-flex; align-items: center; gap: 0.25rem;">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 18l-6-6 6-6"/>
          </svg>
          <span>ä¸Šä¸€é¡µ</span>
        </a>`;
      } else {
        html += `<span class="blog-pagination-btn" style="opacity: 0.4; cursor: not-allowed; display: inline-flex; align-items: center; gap: 0.25rem;">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 18l-6-6 6-6"/>
          </svg>
          <span>ä¸Šä¸€é¡µ</span>
        </span>`;
      }
      
      // é¡µç æ˜¾ç¤ºé€»è¾‘ï¼šæ˜¾ç¤ºå½“å‰é¡µå‰åå„2é¡µï¼Œä»¥åŠé¦–å°¾é¡µ
      const maxVisiblePages = 7; // æœ€å¤šæ˜¾ç¤º7ä¸ªé¡µç æŒ‰é’®
      let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
      let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
      
      // å¦‚æœå³ä¾§é¡µç ä¸è¶³ï¼Œå‘å·¦è°ƒæ•´
      if (endPage - startPage < maxVisiblePages - 1) {
        startPage = Math.max(1, endPage - maxVisiblePages + 1);
      }
      
      // æ˜¾ç¤ºé¦–é¡µ
      if (startPage > 1) {
        html += `<a href="#" class="blog-pagination-btn" onclick="loadPosts(1); return false;">1</a>`;
        if (startPage > 2) {
          html += `<span class="blog-pagination-btn" style="border: none; background: transparent; cursor: default; color: #9ca3af;">...</span>`;
        }
      }
      
      // æ˜¾ç¤ºé¡µç èŒƒå›´
      for (let i = startPage; i <= endPage; i++) {
        if (i === currentPage) {
          html += `<span class="blog-pagination-btn active">${i}</span>`;
        } else {
          html += `<a href="#" class="blog-pagination-btn" onclick="loadPosts(${i}); return false;">${i}</a>`;
        }
      }
      
      // æ˜¾ç¤ºæœ«é¡µ
      if (endPage < totalPages) {
        if (endPage < totalPages - 1) {
          html += `<span class="blog-pagination-btn" style="border: none; background: transparent; cursor: default; color: #9ca3af;">...</span>`;
        }
        html += `<a href="#" class="blog-pagination-btn" onclick="loadPosts(${totalPages}); return false;">${totalPages}</a>`;
      }
      
      // ä¸‹ä¸€é¡µ
      if (currentPage < totalPages) {
        html += `<a href="#" class="blog-pagination-btn" onclick="loadPosts(${currentPage + 1}); return false;" style="display: inline-flex; align-items: center; gap: 0.25rem;">
          <span>ä¸‹ä¸€é¡µ</span>
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 18l6-6-6-6"/>
          </svg>
        </a>`;
      } else {
        html += `<span class="blog-pagination-btn" style="opacity: 0.4; cursor: not-allowed; display: inline-flex; align-items: center; gap: 0.25rem;">
          <span>ä¸‹ä¸€é¡µ</span>
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 18l6-6-6-6"/>
          </svg>
        </span>`;
      }
      
      pagination.innerHTML = html;
    }

    // åŠ è½½åˆ†ç±»
    async function loadCategories() {
      try {
        const response = await getCategories();
        if (response.success) {
          displayCategories(response.data);
        }
      } catch (error) {
        console.error('åŠ è½½åˆ†ç±»å¤±è´¥:', error);
      }
    }

    // æ˜¾ç¤ºåˆ†ç±»ï¼ˆæ‰å¹³åŒ–æ ·å¼ï¼‰
    function displayCategories(categories) {
      const list = document.getElementById('categoriesList');
      
      if (!categories || categories.length === 0) {
        list.innerHTML = '<span style="color: #9ca3af; font-size: 0.875rem;">æš‚æ— åˆ†ç±»</span>';
        return;
      }
      
      list.innerHTML = categories.map(cat => {
        const count = cat.postCount || 0;
        const isActive = currentCategory === cat.name;
        return `<a href="#" onclick="filterByCategory('${escapeHtml(cat.name)}'); return false;" style="display: flex; align-items: center; justify-content: space-between; padding: 0.375rem 0.5rem; border-radius: 0.25rem; text-decoration: none; font-size: 0.8125rem; color: ${isActive ? '#d97706' : '#374151'}; background: ${isActive ? '#fef3c7' : 'transparent'}; font-weight: ${isActive ? '600' : '500'}; transition: all 0.2s; width: 100%; box-sizing: border-box; word-break: break-word;" onmouseover="if(!${isActive}){this.style.background='#f9fafb';}" onmouseout="if(!${isActive}){this.style.background='transparent';}"><span style="flex: 1; min-width: 0; text-align: left; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${escapeHtml(cat.name)}</span><span style="flex-shrink: 0; color: #9ca3af; font-size: 0.75rem; font-weight: normal; margin-left: 0.5rem; text-align: right;">${count}</span></a>`;
      }).join('');
    }


    // æŒ‰åˆ†ç±»ç­›é€‰
    function filterByCategory(category) {
      // å¦‚æœç‚¹å‡»çš„æ˜¯å½“å‰åˆ†ç±»ï¼Œåˆ™å–æ¶ˆç­›é€‰
      if (currentCategory === category) {
        currentCategory = null;
      } else {
        currentCategory = category;
      }
      currentSearch = null;
      currentPage = 1;
      
      // æ¸…é™¤å½’æ¡£ç¼“å­˜ï¼ˆç­›é€‰æ¡ä»¶æ”¹å˜ï¼‰
      archiveCache = null;
      archiveCacheKey = null;
      
      // æ›´æ–°åˆ†ç±»æ˜¾ç¤º
      loadCategories();
      
      // æ ¹æ®å½“å‰è§†å›¾æ¨¡å¼è°ƒç”¨ç›¸åº”çš„åŠ è½½å‡½æ•°
      if (viewMode === 'archive') {
        loadArchive();
      } else {
        loadPosts(1);
      }
      
      if (currentCategory) {
        showToast(`ç­›é€‰åˆ†ç±»: ${currentCategory}`, 'info');
      } else {
        showToast('å·²æ¸…é™¤åˆ†ç±»ç­›é€‰', 'info');
      }
    }


    // æœç´¢
    function handleSearchKeyPress(event) {
      if (event.key === 'Enter') {
        const query = event.target.value.trim();
        if (query) {
          currentSearch = query;
          currentCategory = null;
          currentPage = 1;
          
          // æ¸…é™¤å½’æ¡£ç¼“å­˜ï¼ˆæœç´¢æ¡ä»¶æ”¹å˜ï¼‰
          archiveCache = null;
          archiveCacheKey = null;
          
          // æ ¹æ®å½“å‰è§†å›¾æ¨¡å¼è°ƒç”¨ç›¸åº”çš„åŠ è½½å‡½æ•°
          if (viewMode === 'archive') {
            loadArchive();
          } else {
            loadPosts(1);
          }
          
          showToast(`æœç´¢: ${query}`, 'info');
        } else {
          // æ¸…é™¤æœç´¢
          currentSearch = null;
          currentPage = 1;
          
          // æ¸…é™¤å½’æ¡£ç¼“å­˜ï¼ˆæœç´¢æ¡ä»¶æ”¹å˜ï¼‰
          archiveCache = null;
          archiveCacheKey = null;
          
          // æ ¹æ®å½“å‰è§†å›¾æ¨¡å¼è°ƒç”¨ç›¸åº”çš„åŠ è½½å‡½æ•°
          if (viewMode === 'archive') {
            loadArchive();
          } else {
            loadPosts(1);
          }
        }
      }
    }

    // æ£€æŸ¥ç®¡ç†å‘˜ç™»å½•çŠ¶æ€
    async function checkAdminAuth() {
      try {
        const response = await fetch('/api/auth/admin/me', {
          credentials: 'include',
          method: 'GET'
        });
        
        if (response.ok) {
          const data = await response.json();
          if (data && data.success && data.admin) {
            isAdminLoggedIn = true;
            // å¦‚æœå·²ç™»å½•ï¼Œæ›´æ–°UIæ˜¾ç¤ºç¼–è¾‘æŒ‰é’®
            updateEditButtons();
            return true;
          }
        }
        isAdminLoggedIn = false;
        return false;
      } catch (error) {
        console.error('æ£€æŸ¥ç®¡ç†å‘˜ç™»å½•çŠ¶æ€å¤±è´¥:', error);
        isAdminLoggedIn = false;
        return false;
      }
    }

    // ç¼–è¾‘æ–‡ç« ï¼ˆåœ¨æ–°çª—å£æ‰“å¼€ï¼‰
    function editPost(postId) {
      if (!isAdminLoggedIn) {
        // å¦‚æœæœªç™»å½•ï¼Œè·³è½¬åˆ°ç®¡ç†ç•Œé¢ç™»å½•
        window.location.href = '/blog-admin.html';
        return;
      }
      
      // åœ¨æ–°çª—å£æ‰“å¼€ç¼–è¾‘é¡µé¢
      const editUrl = `/blog-admin.html?edit=${encodeURIComponent(postId)}`;
      const editWindow = window.open(editUrl, '_blank', 'width=1200,height=800,scrollbars=yes,resizable=yes');
      
      if (!editWindow) {
        showToast('æ— æ³•æ‰“å¼€æ–°çª—å£ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨å¼¹çª—è®¾ç½®', 'error');
        return;
      }
      
      // ç›‘å¬æ–°çª—å£å…³é—­äº‹ä»¶ï¼Œåˆ·æ–°æ–‡ç« åˆ—è¡¨
      const checkClosed = setInterval(() => {
        if (editWindow.closed) {
          clearInterval(checkClosed);
          // åˆ·æ–°æ–‡ç« åˆ—è¡¨ï¼ˆæ ¹æ®å½“å‰è§†å›¾æ¨¡å¼ï¼‰
          if (viewMode === 'archive') {
            loadArchive();
          } else {
            loadPosts(1);
          }
        }
      }, 500);
    }

    // æ›´æ–°ç¼–è¾‘æŒ‰é’®æ˜¾ç¤º
    function updateEditButtons() {
      if (!isAdminLoggedIn) {
        // å¦‚æœæœªç™»å½•ï¼Œéšè—æ‰€æœ‰ç¼–è¾‘æŒ‰é’®
        document.querySelectorAll('.blog-post-edit-btn').forEach(btn => {
          btn.style.display = 'none';
        });
        return;
      }
      
      // æ›´æ–°æ–‡ç« å¡ç‰‡ä¸­çš„ç¼–è¾‘æŒ‰é’®
      document.querySelectorAll('.blog-post-edit-btn').forEach(btn => {
        btn.style.display = 'inline-flex';
      });
    }

    // åŠ è½½çƒ­é—¨æ–‡ç« ï¼ˆæŒ‰æµè§ˆé‡æ’åºï¼‰
    async function loadHotPosts() {
      try {
        const response = await getPosts({
          published: 'true',
          pageSize: 20 // è·å–æ›´å¤šæ–‡ç« ä»¥ä¾¿æ’åº
        });
        
        if (response.success && response.data) {
          const hotPostsList = document.getElementById('hotPostsList');
          if (hotPostsList) {
            // æŒ‰æµè§ˆé‡æ’åºï¼Œå–å‰5ç¯‡
            const sortedPosts = [...(response.data || [])]
              .sort((a, b) => (b.views || 0) - (a.views || 0))
              .slice(0, 5);
            
            if (sortedPosts.length === 0) {
              hotPostsList.innerHTML = '<p style="font-size: 0.8125rem; color: #9ca3af; margin: 0;">æš‚æ— çƒ­é—¨æ–‡ç« </p>';
              return;
            }
            
            hotPostsList.innerHTML = sortedPosts.map((post, index) => {
              const views = post.views || 0;
              return `
                <a href="/blog-detail.html?slug=${encodeURIComponent(post.slug)}" style="display: flex; align-items: start; gap: 0.5rem; padding: 0.375rem; border-radius: 0.25rem; text-decoration: none; transition: background 0.2s; width: 100%; box-sizing: border-box;" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='transparent'">
                  <span style="flex-shrink: 0; width: 18px; height: 18px; display: flex; align-items: center; justify-content: center; background: ${index < 3 ? '#fef3c7' : '#f3f4f6'}; color: ${index < 3 ? '#d97706' : '#6b7280'}; border-radius: 0.25rem; font-size: 0.6875rem; font-weight: 600; text-align: center; line-height: 1;">${index + 1}</span>
                  <div style="flex: 1; min-width: 0; display: flex; flex-direction: column; gap: 0.125rem;">
                    <div style="font-size: 0.75rem; font-weight: 500; color: #374151; line-height: 1.3; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; text-align: left; word-break: break-word;">${escapeHtml(post.name || post.title || 'æœªå‘½å')}</div>
                    <div style="font-size: 0.6875rem; color: #9ca3af; text-align: left; white-space: nowrap;">ğŸ‘ï¸ ${views}</div>
                  </div>
                </a>
              `;
            }).join('');
          }
        }
      } catch (error) {
        console.error('åŠ è½½çƒ­é—¨æ–‡ç« å¤±è´¥:', error);
        const hotPostsList = document.getElementById('hotPostsList');
        if (hotPostsList) {
          hotPostsList.innerHTML = '<p style="font-size: 0.8125rem; color: #9ca3af; margin: 0;">åŠ è½½å¤±è´¥</p>';
        }
      }
    }
    
    // å¼ºåˆ¶è®¾ç½®åˆ—è¡¨å¸ƒå±€çš„å‡½æ•°ï¼ˆè®ºå›é£æ ¼ï¼‰
    function forceGridLayout() {
      const grid = document.getElementById('postsGrid');
      if (!grid) return;
      
      // ç¡®ä¿åˆ—è¡¨å¸ƒå±€
      grid.style.setProperty('display', 'flex', 'important');
      grid.style.setProperty('flex-direction', 'column', 'important');
      grid.style.setProperty('gap', '0', 'important');
      grid.style.setProperty('width', '100%', 'important');
      grid.style.setProperty('max-width', '100%', 'important');
      grid.style.setProperty('box-sizing', 'border-box', 'important');
    }

    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', async () => {
      initParticles();
      
      // æ£€æŸ¥ç®¡ç†å‘˜ç™»å½•çŠ¶æ€
      await checkAdminAuth();
      
      // å¼ºåˆ¶è®¾ç½®ç½‘æ ¼å¸ƒå±€
      forceGridLayout();
      
      loadPosts(1);
      loadCategories();
      loadHotPosts();
      
      // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°è®¾ç½®å¸ƒå±€
      let resizeTimer;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(() => {
          forceGridLayout();
        }, 100);
      });
      
      // æµè§ˆæ–‡ç« æŒ‰é’®ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
      document.querySelector('a[href="#posts"]')?.addEventListener('click', (e) => {
        e.preventDefault();
        switchViewMode('posts');
        document.getElementById('posts').scrollIntoView({ behavior: 'smooth' });
        setTimeout(forceGridLayout, 100);
      });

      // æ–‡ç« å½’æ¡£æŒ‰é’®ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
      document.querySelector('a[href="#archive"]')?.addEventListener('click', (e) => {
        e.preventDefault();
        switchViewMode('archive');
        document.getElementById('archive').scrollIntoView({ behavior: 'smooth' });
      });
    });
  </script>
</body>
</html>
