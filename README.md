# 奶茶点单系统

一个支持手机和电脑的在线奶茶点单系统，具有时间控制、阶梯折扣、付款截图上传和条形码功能。

## 功能特点

- ✅ 响应式设计，支持手机和电脑访问
- ✅ 免登录点单
- ✅ 点单时间控制（开放/关闭）
- ✅ 阶梯折扣系统（根据总金额自动计算）
- ✅ 付款截图上传
- ✅ 订单汇总表格
- ✅ 条形码生成（用于自助取餐）
- ✅ 订单详情查看

## 安装和运行

1. 安装依赖：
```bash
npm install
```

2. 启动服务器：
```bash
npm start
```

3. 访问系统：
打开浏览器访问 `http://localhost:3000`

## 使用说明

### 用户端

1. **点单**：在点单开放期间，选择商品并添加到购物车，填写姓名和手机号（可选），提交订单
2. **查看订单**：在"我的订单"页面查看所有订单
3. **付款**：点单时间关闭后，可以查看折扣后的价格并上传付款截图
4. **查看条形码**：付款后可以查看订单条形码，用于取餐
5. **扫码取餐**：扫描杯子上的条形码，可以查看订单详情，确认是自己的订单后取餐

### 管理端

1. **控制点单时间**：在"管理"页面可以开放/关闭点单
2. **设置折扣规则**：可以修改折扣规则（需要修改代码或扩展管理功能）

## 折扣规则

默认折扣规则：
- 满¥0：无折扣
- 满¥50：5%折扣
- 满¥100：10%折扣
- 满¥200：15%折扣

折扣在点单时间关闭后自动计算并应用到所有订单。

## 技术栈

- 后端：Node.js + Express
- 前端：原生 JavaScript + Tailwind CSS
- 数据存储：JSON 文件
- 条形码：JsBarcode
- 文件上传：Multer

## 扫码功能

系统支持通过条形码扫码查看订单：
- 每个订单都有唯一的订单号和条形码
- 扫码后会显示订单详情（商品、价格、客户信息等）
- 老板可以将条形码打印后贴在杯子上，客户扫码确认后自助取餐
- 扫码链接格式：`http://your-domain/?order=订单号`

## 注意事项

- 数据存储在 `data.json` 文件中
- 付款截图存储在 `uploads/` 目录
- 建议定期备份数据文件
- 条形码使用 CODE128 格式，支持大多数扫码设备

